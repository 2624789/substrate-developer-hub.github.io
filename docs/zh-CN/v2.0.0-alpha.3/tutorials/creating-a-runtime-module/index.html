<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating an External Pallet · Substrate Developer Hub</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In this tutorial, you&#x27;ll write a Substrate pallet that lives in its own crate, and include it in a node based on the `substrate-node-template`."/><meta name="docsearch:version" content="v2.0.0-alpha.3"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Creating an External Pallet · Substrate Developer Hub"/><meta property="og:type" content="website"/><meta property="og:url" content="https://substrate-developer-hub.github.io//"/><meta property="og:description" content="In this tutorial, you&#x27;ll write a Substrate pallet that lives in its own crate, and include it in a node based on the `substrate-node-template`."/><meta property="og:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/load.js"></script><script type="text/javascript" src="/js/ui.js" defer=""></script><script type="text/javascript" src="/js/config.js" defer=""></script><script type="text/javascript" src="/js/klaro.min.js" defer=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/Substrate-logo.svg" alt="Substrate Developer Hub"/><h2 class="headerTitleWithLogo">Substrate Developer Hub</h2></a><a href="/zh-CN/versions"><h3>v2.0.0-alpha.3</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/zh-CN/v2.0.0-alpha.3/" target="_self">文档</a></li><li class=""><a href="/recipes" target="_self">Recipes</a></li><li class=""><a href="/zh-CN/tutorials" target="_self">教程</a></li><li class=""><a href="/zh-CN/community" target="_self">社区</a></li><li class=""><a href="https://github.com/paritytech/substrate" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/v2.0.0-alpha.3/tutorials/creating-a-runtime-module">English</a></li><li><a href="/docs/ru/v2.0.0-alpha.3/tutorials/creating-a-runtime-module">Русский</a></li><li><a href="https://crowdin.com/project/substrate-developer-hub" target="_blank" rel="noreferrer noopener">参与翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/substrate-developer-hub/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">Creating an External Pallet</h1></header><article><div><span><p>In this tutorial, you'll write a Substrate pallet that lives in its own crate, and include it in a node based on the <code>substrate-node-template</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<p>If you haven't already done so, follow the <a href="getting-started.md">Getting Started</a> guide to download necessary tools to build Substrate.</p>
<h3><a class="anchor" aria-hidden="true" id="clone-the-node-and-pallet-templates"></a><a href="#clone-the-node-and-pallet-templates" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Clone the Node and Pallet Templates</h3>
<p>We're not going to write our pallet directly as part of the node template, but rather as a separate Rust crate. This approach allows us to publish our pallet separate from our node and also allows other to easily import this pallet into their own Substrate runtime.</p>
<ol>
<li><p>Clone the Substrate node template:</p>
<pre><code class="hljs css language-bash"><span class="token function">git</span> clone -b v2.0.0-alpha.3 --depth <span class="token number">1</span> https://github.com/substrate-developer-hub/substrate-node-template my-node
</code></pre></li>
<li><p>Clone the Substrate pallet template in the <code>pallets</code> directory of your node template:</p>
<pre><code class="hljs css language-bash"><span class="token function">git</span> clone -b v2.0.0-alpha.3 https://github.com/substrate-developer-hub/substrate-pallet-template my-pallet
</code></pre></li>
<li><p>Build the Substrate node template:</p>
<pre><code class="hljs css language-bash"><span class="token builtin class-name">cd</span> my-node
cargo build --release
</code></pre></li>
</ol>
<p>The <code>substrate-node-template</code> contains a working Substrate node, and the <code>substrate-pallet-template</code> contains an independent Rust crate which is a Substrate pallet that can be included in your node. The compilation of the node may take up to 30 minutes depending on your hardware, so let that run while you continue to follow this guide.</p>
<p>If you aren't familiar with Rust including and using other pallets, you can refer to <a href="https://doc.rust-lang.org/cargo/guide/creating-a-new-project.html">the Cargo book</a> for a more in-depth explanation.</p>
<h2><a class="anchor" aria-hidden="true" id="the-substrate-pallet-template"></a><a href="#the-substrate-pallet-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Substrate Pallet Template</h2>
<p>You should be able to successfully compile the Substrate pallet template with:</p>
<pre><code class="hljs css language-bash"><span class="token builtin class-name">cd</span> my-pallet
cargo build --release
</code></pre>
<p>Let's explore the Substrate pallet template, starting with the <code>Cargo.toml</code> file.</p>
<h3><a class="anchor" aria-hidden="true" id="renaming-your-crate"></a><a href="#renaming-your-crate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Renaming Your Crate</h3>
<p>In the <code>Cargo.toml</code> file, you can update the crate's name and authorship. In this tutorial, we're focusing on how to create and use the pallet rather than writing interesting pallet logic. So let's call it <code>test-pallet</code>.</p>
<p>The beginning of the <code>Cargo.toml</code> now looks like:</p>
<p><strong><code>my-node/pallets/my-pallet/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-toml"><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"test-pallet"</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"2.0.0"</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"Your Name"</span><span class="token punctuation">]</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">"2018"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="your-pallets-std-feature"></a><a href="#your-pallets-std-feature" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Your Pallet's <code>std</code> Feature</h3>
<p>In your <code>my-node/pallets/my-pallet/Cargo.toml</code> file, you will notice a few lines about the &quot;<code>std</code> feature&quot;. In Rust, when you enable <code>std</code>, you give your project access to <a href="https://doc.rust-lang.org/std/">the Rust standard libraries</a>. This works just fine when building native binaries.</p>
<p>However, Substrate also builds the runtime code to WebAssembly (Wasm). In this case we use cargo features to disable the Rust standard library. Thus, all the dependencies we use for our pallet, and our entire runtime, must be able to compile with <a href="https://rust-embedded.github.io/book/intro/no-std.html"><code>no_std</code></a> feature. Our <code>Cargo.toml</code> file tells our pallet's dependencies to only use their <code>std</code> feature when this pallet also uses its <code>std</code> feature, like so:</p>
<p><strong><code>my-node/pallets/my-pallet/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-section">[features]</span>
<span class="hljs-attr">default</span> = [<span class="hljs-string">'std'</span>]
<span class="hljs-attr">std</span> = [
    <span class="hljs-string">'codec/std'</span>,
    <span class="hljs-string">'frame-support/std'</span>,
    <span class="hljs-string">'safe-mix/std'</span>,
    <span class="hljs-string">'system/std'</span>,
]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="consistent-substrate-dependencies"></a><a href="#consistent-substrate-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Consistent Substrate Dependencies</h3>
<p>All Substrate pallets will depend on some low-level FRAME libraries such as <code>frame-system</code> and <code>frame-support</code>. These libraries are pulled from the main <a href="https://github.com/paritytech/substrate">Substrate GitHub repository</a>. When people build their own Substrate nodes, they will also have dependencies on the main Substrate repository.</p>
<p>Because of this, you will need to be careful to ensure consistent dependencies from your pallet and the your Substrate node. If your pallet is dependent on one version of Substrate, and the node on another, compilation will run into errors where the Substrate versions may be incompatible, or different version of the same library are being used. Ultimately Cargo will not be able to resolve those conflicts and you will get a compile time error.</p>
<p><strong><code>my-node/pallets/my-pallet/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-comment"># --snip--</span>

<span class="hljs-section">[dependencies.frame-support]</span>
<span class="hljs-attr">default-features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/paritytech/substrate.git'</span>
<span class="hljs-attr">rev</span> = <span class="hljs-string">'013c1ee167354a08283fb69915fda56a62fee943'</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">'2.0.0-alpha.3'</span>

<span class="hljs-comment"># Develop against a git commit by specifying the same Substrate commit as your main node.</span>
<span class="hljs-comment"># It is important to use the same Substrate commit to prevent dependencies mismatch.</span>

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="your-pallets-dev-dependencies"></a><a href="#your-pallets-dev-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Your Pallet's Dev Dependencies</h3>
<p>The final section of the <code>Cargo.toml</code> file specifies the dev dependencies. These are the dependencies that are needed in your pallet's tests, but not necessary the actual pallet itself.</p>
<p><strong><code>my-node/pallets/my-pallet/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-comment"># --snip--</span>

<span class="hljs-section">[dev-dependencies.sp-core]</span>
<span class="hljs-attr">default-features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/paritytech/substrate.git'</span>
<span class="hljs-attr">rev</span> = <span class="hljs-string">'013c1ee167354a08283fb69915fda56a62fee943'</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">'2.0.0-alpha.3'</span>
</code></pre>
<p>You can confirm that the tests in the Substrate pallet template pass with:</p>
<pre><code class="hljs css language-bash">cargo <span class="token builtin class-name">test</span>
</code></pre>
<p>You may need to modify the dependencies you need for the pallets you create.</p>
<h2><a class="anchor" aria-hidden="true" id="add-your-pallet-to-your-node"></a><a href="#add-your-pallet-to-your-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Your Pallet to Your Node</h2>
<p>With our pallet now compiling and passing it's tests, we're ready to add it to our node.</p>
<p>We first add our newly-created crate as a dependency in the node's runtime <code>Cargo.toml</code>. Then we tell the pallet to only build its <code>std</code> feature when the runtime itself does, as follows:</p>
<p><strong><code>my-node/runtime/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-comment"># --snip--</span>

<span class="hljs-section">[dependencies.test-pallet]</span>
<span class="hljs-attr">default-features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">path</span> = <span class="hljs-string">'../pallets/my-pallet'</span>

<span class="hljs-comment"># toward the bottom</span>
<span class="hljs-section">[features]</span>
<span class="hljs-attr">default</span> = [<span class="hljs-string">'std'</span>]
<span class="hljs-attr">std</span> = [
    <span class="hljs-string">'test-pallet/std'</span>,
    <span class="hljs-comment"># --snip--</span>
]
</code></pre>
<blockquote>
<p>You <strong>must</strong> set <code>default_features = false</code> so that your runtime will successfully compile to Wasm.</p>
</blockquote>
<p>Next we will update <code>my-node/runtime/src/lib.rs</code> to actually use our new runtime pallet, by adding a trait implementation with our <code>test_pallet</code> and add it in our <code>construct_runtime!</code> macro.</p>
<p><strong><code>my-node/runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">// add the following code block</span>
<span class="token keyword">impl</span> test_pallet<span class="token punctuation">::</span>Trait <span class="token keyword">for</span> Runtime <span class="token punctuation">{</span>
  <span class="token keyword">type</span> Event <span class="token operator">=</span> Event<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// --snip--</span>
<span class="token function">construct_runtime!</span><span class="token punctuation">(</span>
  <span class="token keyword">pub</span> <span class="token keyword">enum</span> Runtime <span class="token keyword">where</span>
    Block <span class="token operator">=</span> Block<span class="token punctuation">,</span>
    NodeBlock <span class="token operator">=</span> opaque<span class="token punctuation">::</span>Block<span class="token punctuation">,</span>
    UncheckedExtrinsic <span class="token operator">=</span> UncheckedExtrinsic
  <span class="token punctuation">{</span>
    <span class="token comment">// --snip--</span>
    <span class="token comment">// add the following line</span>
    TestPallet<span class="token punctuation">:</span> test_pallet<span class="token punctuation">::</span><span class="token punctuation">{</span>Module<span class="token punctuation">,</span> Call<span class="token punctuation">,</span> Storage<span class="token punctuation">,</span> Event<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="run-your-node"></a><a href="#run-your-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run Your Node</h2>
<p>At this point you have the pallet packaged up as it's own crate and included in your node's runtime.</p>
<ol>
<li><p>Compile and run your node with:</p>
<pre><code class="hljs css language-bash"><span class="token builtin class-name">cd</span> my-node
cargo build --release
</code></pre></li>
<li><p>Purge any existing dev chain (Enter <code>y</code> on prompt):</p>
<pre><code class="hljs css language-bash">./target/release/node-template purge-chain --dev
</code></pre></li>
<li><p>Start your node:</p>
<pre><code class="hljs css language-bash">./target/release/node-template --dev
</code></pre></li>
</ol>
<p>Finally, start the <a href="https://polkadot.js.org/apps/#/explorer?rpc=ws://127.0.0.1:9944">Polkadot-JS Apps connecting to your local node</a> to confirm that the pallet is working as expected.</p>
<blockquote>
<p><strong>Notes:</strong> You can also manually set the node URL in Polkadot-JS Apps by navigating to the <strong>Settings</strong> tab, and have the <strong>remote node/endpoint to connect to</strong> set to <strong>Local Node</strong>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="publish-your-pallet"></a><a href="#publish-your-pallet" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Publish Your Pallet</h2>
<p>Once your pallet is no longer in test phase, you should consider publishing it to GitHub. Go ahead and <a href="https://help.github.com/en/articles/create-a-repo">create a GitHub repository</a> and <a href="https://help.github.com/en/articles/pushing-to-a-remote">push your pallet's code</a> to it.</p>
<p>With the code on GitHub, your pallet is properly published. 恭喜你！ Now we just need to update your node to use the code that is on GitHub instead of a hard-coded file system path. The final edit to your runtime's <code>Cargo.toml</code> file is to update its dependency on your pallet. The new code is:</p>
<p><strong><code>my-node/runtime/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-section">[dependencies.your-pallet-name]</span>
<span class="hljs-attr">default_features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/your-username/your-pallet'</span>
<span class="hljs-attr">branch</span> = <span class="hljs-string">'master'</span>

<span class="hljs-comment"># You may choose a specific commit or tag instead of branch</span>
<span class="hljs-comment"># rev = '&lt;git-commit&gt;'</span>
<span class="hljs-comment"># tag = '&lt;some tag&gt;</span>
</code></pre>
<p>Compile one more time and notice that Cargo now grabs your pallet from GitHub instead of using the local files.</p>
<h2><a class="anchor" aria-hidden="true" id="后续步骤"></a><a href="#后续步骤" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>后续步骤</h2>
<p>恭喜你！ You've written a Substrate pallet in its own Rust crate, and published that crate to GitHub. Other blockchain developers can now easily use your pallet in their runtime by simply including those same four lines of code in their runtime's <code>Cargo.toml</code> files and updating their runtime's <code>lib.rs</code> file.</p>
<p>If you're not sure what to do next, check out the resources below.</p>
<h3><a class="anchor" aria-hidden="true" id="learn-more"></a><a href="#learn-more" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Learn More</h3>
<ul>
<li>We have <a href="https://substrate.dev/en/tutorials">plenty of tutorials</a> to showcase Substrate development concepts and techniques.</li>
<li>To learn more about writing your own runtime with a front end, we have a <a href="https://substrate.dev/substrate-collectables-workshop">Substrate Collectables Workshop</a> for building an end-to-end application.</li>
<li>For more information about runtime development tips and patterns, refer to our <a href="https://substrate.dev/recipes/">Substrate Recipes</a>.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h3>
<ul>
<li>Tutorial on <a href="tutorials/adding-a-module-to-your-runtime">adding a <code>Contracts</code> Pallet into runtime</a>, so your node can run smart contract.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="references"></a><a href="#references" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/cargo/">The Cargo book</a></li>
<li>More about <a href="https://rustwasm.github.io/">Rust and WebAssembly</a></li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#prerequisites">Prerequisites</a><ul class="toc-headings"><li><a href="#clone-the-node-and-pallet-templates">Clone the Node and Pallet Templates</a></li></ul></li><li><a href="#the-substrate-pallet-template">The Substrate Pallet Template</a><ul class="toc-headings"><li><a href="#renaming-your-crate">Renaming Your Crate</a></li><li><a href="#your-pallets-std-feature">Your Pallet's <code>std</code> Feature</a></li><li><a href="#consistent-substrate-dependencies">Consistent Substrate Dependencies</a></li><li><a href="#your-pallets-dev-dependencies">Your Pallet's Dev Dependencies</a></li></ul></li><li><a href="#add-your-pallet-to-your-node">Add Your Pallet to Your Node</a></li><li><a href="#run-your-node">Run Your Node</a></li><li><a href="#publish-your-pallet">Publish Your Pallet</a></li><li><a href="#后续步骤">后续步骤</a><ul class="toc-headings"><li><a href="#learn-more">Learn More</a></li><li><a href="#examples">Examples</a></li><li><a href="#references">References</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Substrate-logo.svg" alt="Substrate Developer Hub" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-CN/getting-started">Getting Started</a><a href="/zh-CN/tutorials">Tutorials</a><a href="https://crates.parity.io/">Reference Docs</a><a href="/recipes/">Recipes</a></div><div><h5>Community</h5><a href="/zh-CN/videos">Videos</a><a href="/zh-CN/seminar">Substrate Seminar</a><a href="http://stackoverflow.com/questions/tagged/substrate" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://riot.im/app/#/room/!HzySYSaIhtyWrwiwEV:matrix.org">Riot Chat</a><a href="https://twitter.com/ParityTech" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.meetup.com/parity/" target="_blank" rel="noreferrer noopener">Events</a></div><div><h5>More</h5><a href="https://builders.parity.io/">Substrate Builders Program</a><a href="https://www.parity.io/blog/">Blog</a><a href="https://github.com/paritytech/substrate">Substrate GitHub</a><a href="https://github.com/substrate-developer-hub/">Developer Hub GitHub</a><a href="https://www.parity.io/privacy/">Privacy Policy</a><a href="#" id="cookie-settings">Cookie Settings<script>
              var cookieSettings = document.getElementById('cookie-settings');
              cookieSettings.onclick = function() {
                return klaro.show();
              };
              </script></a></div></section><section class="copyright">Copyright © 2020 Parity Technologies</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5cd09916f4ba4c283b2d45ee7386fc34',
                indexName: 'substrate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN"]}
              });
            </script></body></html>